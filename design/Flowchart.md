# Sapphire Mall 用户操作流程图

## 流程概述

本文档描述了Sapphire Mall平台的主要用户操作流程，涵盖新用户入门、商品购买、DeFi挖矿、商家运营等核心场景。

## 1. 新用户入门流程

```mermaid
flowchart TD
    A[访问首页] --> B{是否已连接钱包?}
    B -->|否| C[点击"连接钱包"]
    B -->|是| D[浏览平台功能]
    
    C --> E[选择钱包类型]
    E --> F[MetaMask/WalletConnect]
    F --> G[授权连接]
    G --> H[钱包连接成功]
    H --> D
    
    D --> I[查看入门指南]
    I --> J[Step 1: 了解平台价值]
    J --> K[Step 2: 代币兑换说明]
    K --> L[Step 3: 购物/投资介绍]
    L --> M[选择下一步操作]
    
    M --> N[开始购物]
    M --> O[参与DeFi挖矿]
    M --> P[兑换SAP代币]
```

## 2. 商品购买流程

```mermaid
flowchart TD
    A[首页商品推荐] --> B[点击查看全部商品]
    B --> C[商品列表页面]
    
    C --> D[使用筛选功能]
    D --> E[选择分类]
    D --> F[设置价格范围]
    D --> G[选择评分要求]
    
    E --> H[查看筛选结果]
    F --> H
    G --> H
    
    H --> I[点击商品卡片]
    I --> J[商品详情页]
    
    J --> K[查看商品信息]
    K --> L[检查课程大纲]
    K --> M[了解讲师背景]
    K --> N[查看用户评价]
    
    L --> O{是否购买?}
    M --> O
    N --> O
    
    O -->|否| P[添加到收藏]
    O -->|否| Q[查看相关推荐]
    O -->|是| R[点击立即购买]
    
    P --> C
    Q --> I
    
    R --> S{检查SAP余额}
    S -->|不足| T[跳转代币兑换]
    S -->|充足| U[确认购买信息]
    
    T --> V[完成兑换]
    V --> U
    
    U --> W[确认支付]
    W --> X[智能合约执行]
    X --> Y[支付成功]
    Y --> Z[获得商品访问权限]
```

## 3. 代币兑换流程

```mermaid
flowchart TD
    A[进入代币兑换页] --> B[查看当前汇率]
    B --> C[选择支付代币]
    
    C --> D[ETH]
    C --> E[USDT]
    C --> F[BTC]
    C --> G[USDC]
    
    D --> H[输入兑换金额]
    E --> H
    F --> H
    G --> H
    
    H --> I[系统计算获得SAP数量]
    I --> J[显示兑换详情]
    J --> K[手续费: 0.3%]
    J --> L[价格影响: <0.01%]
    J --> M[最小获得数量]
    
    K --> N{确认兑换?}
    L --> N
    M --> N
    
    N -->|否| O[调整金额]
    N -->|是| P[点击兑换按钮]
    
    O --> H
    
    P --> Q[检查余额和授权]
    Q --> R[发起链上交易]
    R --> S[等待区块确认]
    S --> T[兑换成功]
    T --> U[更新余额显示]
    U --> V[记录交易历史]
```

## 4. DeFi流动性挖矿流程

```mermaid
flowchart TD
    A[进入DeFi挖矿页] --> B[查看挖矿概览]
    B --> C[当前投入资金]
    B --> D[实时收益]
    B --> E[待领取奖励]
    
    E --> F{是否有待领取奖励?}
    F -->|是| G[点击领取奖励]
    F -->|否| H[查看流动性池]
    
    G --> I[确认交易]
    I --> J[奖励到账]
    J --> H
    
    H --> K[选择流动性池]
    K --> L[SAP/ETH池]
    K --> M[SAP/USDT池]
    K --> N[SAP/BTC池]
    
    L --> O[查看池详情]
    M --> O
    N --> O
    
    O --> P[年化收益率]
    O --> Q[总锁定价值]
    O --> R[我的份额]
    
    P --> S{决定操作}
    Q --> S
    R --> S
    
    S --> T[添加流动性]
    S --> U[移除流动性]
    S --> V[查看其他池]
    
    V --> K
    
    T --> W[输入投入金额]
    W --> X[确认流动性比例]
    X --> Y[授权代币使用]
    Y --> Z[添加流动性成功]
    Z --> AA[开始获得奖励]
    
    U --> BB[选择移除比例]
    BB --> CC[确认移除操作]
    CC --> DD[收回代币]
    DD --> EE[结算奖励]
```

## 5. 商家入驻和运营流程

```mermaid
flowchart TD
    A[申请成为商家] --> B[提交认证材料]
    B --> C[等待平台审核]
    C --> D{审核结果}
    
    D -->|通过| E[获得商家权限]
    D -->|拒绝| F[查看拒绝原因]
    
    F --> G[完善资料]
    G --> B
    
    E --> H[进入商家后台]
    H --> I[完善店铺信息]
    I --> J[上传店铺头像]
    I --> K[编写店铺描述]
    I --> L[设置联系方式]
    
    J --> M[发布第一个商品]
    K --> M
    L --> M
    
    M --> N[填写商品信息]
    N --> O[上传商品图片]
    N --> P[设置商品价格]
    N --> Q[编写商品描述]
    N --> R[选择商品分类]
    
    O --> S[提交审核]
    P --> S
    Q --> S
    R --> S
    
    S --> T[等待平台审核]
    T --> U{审核结果}
    
    U -->|通过| V[商品上架成功]
    U -->|拒绝| W[修改商品信息]
    
    W --> N
    
    V --> X[商品开始销售]
    X --> Y[接收订单通知]
    Y --> Z[处理订单]
    Z --> AA[确认订单完成]
    AA --> BB[获得销售收益]
    BB --> CC[查看销售数据]
```

## 6. 用户个人中心操作流程

```mermaid
flowchart TD
    A[进入个人中心] --> B[查看资产概览]
    B --> C[总资产价值]
    B --> D[代币资产明细]
    B --> E[资产分布图]
    
    C --> F[查看24h变化]
    D --> G[各代币价格走势]
    E --> H[资产配置建议]
    
    F --> I[选择功能模块]
    G --> I
    H --> I
    
    I --> J[我的订单]
    I --> K[DeFi挖矿]
    I --> L[交易记录]
    I --> M[我的收藏]
    I --> N[账户设置]
    I --> O[安全中心]
    
    J --> P[查看购买历史]
    P --> Q[下载发票]
    P --> R[申请退款]
    
    K --> S[挖矿收益详情]
    S --> T[收益趋势图]
    S --> U[复投设置]
    
    L --> V[筛选交易类型]
    V --> W[导出交易记录]
    
    M --> X[管理收藏商品]
    X --> Y[批量取消收藏]
    X --> Z[查看价格变化]
    
    N --> AA[修改个人信息]
    AA --> BB[更新头像]
    AA --> CC[修改邮箱]
    AA --> DD[设置通知偏好]
    
    O --> EE[查看登录记录]
    EE --> FF[设备管理]
    EE --> GG[修改密码]
    EE --> HH[启用2FA]
```

## 7. 移动端适配流程

```mermaid
flowchart TD
    A[移动端访问] --> B[自动适配屏幕]
    B --> C[触摸友好交互]
    
    C --> D[滑动浏览商品]
    C --> E[下拉刷新数据]
    C --> F[手势操作]
    
    D --> G[商品卡片优化]
    G --> H[图片懒加载]
    G --> I[信息层级调整]
    
    E --> J[实时数据更新]
    J --> K[价格刷新]
    J --> L[余额更新]
    
    F --> M[左滑操作]
    F --> N[长按功能]
    
    M --> O[快捷操作菜单]
    N --> P[上下文菜单]
    
    O --> Q[添加收藏]
    O --> R[分享商品]
    
    P --> S[复制链接]
    P --> T[举报内容]
```

## 8. 异常处理流程

```mermaid
flowchart TD
    A[系统异常检测] --> B{异常类型}
    
    B --> C[网络连接异常]
    B --> D[钱包连接异常]
    B --> E[交易失败]
    B --> F[智能合约错误]
    
    C --> G[显示网络错误提示]
    G --> H[提供重试按钮]
    H --> I[检查网络状态]
    I --> J{网络恢复?}
    J -->|是| K[自动重新加载]
    J -->|否| L[提供离线功能]
    
    D --> M[显示钱包连接错误]
    M --> N[引导重新连接]
    N --> O[检测钱包状态]
    O --> P{连接成功?}
    P -->|是| Q[恢复正常操作]
    P -->|否| R[提供技术支持]
    
    E --> S[显示交易失败原因]
    S --> T[Gas费不足]
    S --> U[余额不足]
    S --> V[网络拥堵]
    
    T --> W[建议调整Gas]
    U --> X[引导充值]
    V --> Y[建议稍后重试]
    
    F --> Z[显示合约错误]
    Z --> AA[提供错误代码]
    AA --> BB[联系技术支持]
    BB --> CC[错误上报系统]
```

## 流程优化建议

### 1. 用户体验优化
- **减少步骤**: 合并相似操作，简化流程
- **智能提示**: 根据用户行为提供个性化建议
- **快捷操作**: 提供常用功能的快捷入口
- **状态保存**: 保存用户操作进度，避免重复输入

### 2. 性能优化
- **预加载**: 预测用户下一步操作，提前加载内容
- **缓存策略**: 合理缓存用户数据和偏好设置
- **异步处理**: 耗时操作异步执行，避免界面卡顿
- **增量更新**: 只更新变化的数据部分

### 3. 安全优化
- **交易确认**: 重要操作需要二次确认
- **风险提示**: 高风险操作显著提醒用户
- **会话管理**: 自动检测异常登录行为
- **数据加密**: 敏感信息端到端加密

### 4. 可访问性优化
- **键盘导航**: 支持完整的键盘操作
- **屏幕阅读**: 兼容屏幕阅读器软件
- **对比度**: 确保文字和背景对比度充足
- **字体大小**: 支持字体大小调整

---

*本流程图将根据用户反馈和产品迭代持续优化更新。* 