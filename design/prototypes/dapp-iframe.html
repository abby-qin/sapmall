<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sapphire Mall DApp - Web3虚拟商品交易平台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'sapphire': {
                            50: '#eff6ff',
                            100: '#dbeafe', 
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }
        .glow-effect {
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
        }
        .gradient-border {
            background: linear-gradient(45deg, #3b82f6, #8b5cf6);
            padding: 2px;
            border-radius: 16px;
        }
        .gradient-border-content {
            background: #1f2937;
            border-radius: 14px;
            padding: 1.5rem;
        }
        .network-icon-bg {
            background: linear-gradient(45deg, #3b82f6, #6366f1);
        }
        .network-icon-bg:hover {
            background: linear-gradient(45deg, #2563eb, #4f46e5);
        }
        .network-icon-bg.ethereum {
            background: linear-gradient(45deg, #627eea, #8b5cf6);
        }
        .network-icon-bg.polygon {
            background: linear-gradient(45deg, #8247e5, #ec4899);
        }
        .network-icon-bg.bsc {
            background: linear-gradient(45deg, #f59e0b, #f97316);
        }
        .main-iframe {
            background: transparent;
            border: none;
            border-radius: 12px;
            overflow: hidden;
        }
    </style>
</head>
<body class="min-h-screen text-white">
    <!-- 顶部导航栏 -->
    <nav class="bg-gray-900/90 backdrop-blur-sm border-b border-gray-700 sticky top-0 z-50">
        <div class="container mx-auto px-6">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center glow-effect">
                        <i class="fas fa-gem text-white text-lg"></i>
                    </div>
                    <div>
                        <span class="text-xl font-bold">Sapphire Mall</span>
                        <div class="text-xs text-gray-400" data-en="Web3 Virtual Marketplace">Web3虚拟商品交易平台</div>
                    </div>
                </div>

                <!-- 导航菜单 -->
                <div class="hidden md:flex items-center space-x-1">
                    <button onclick="loadPage('marketplace')" data-page="marketplace" class="nav-item px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-blue-600 text-white" data-en="Marketplace">商城</button>
                    <button onclick="loadPage('staking')" data-page="staking" class="nav-item px-4 py-2 rounded-lg text-sm font-medium transition-colors text-gray-300 hover:text-white hover:bg-gray-700" data-en="Staking">质押</button>
                    <button onclick="loadPage('exchange')" data-page="exchange" class="nav-item px-4 py-2 rounded-lg text-sm font-medium transition-colors text-gray-300 hover:text-white hover:bg-gray-700" data-en="Exchange">兑换</button>
                    <button onclick="loadPage('governance')" data-page="governance" class="nav-item px-4 py-2 rounded-lg text-sm font-medium transition-colors text-gray-300 hover:text-white hover:bg-gray-700" data-en="Governance">治理</button>
                    <button onclick="loadPage('help')" data-page="help" class="nav-item px-4 py-2 rounded-lg text-sm font-medium transition-colors text-gray-300 hover:text-white hover:bg-gray-700" data-en="Help">帮助</button>
                </div>

                <!-- 右侧工具栏 -->
                <div class="flex items-center space-x-4">
                    <!-- 语言切换 -->
                    <button onclick="toggleLanguage()" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fas fa-globe text-lg"></i>
                    </button>

                    <!-- 钱包连接区域 -->
                    <div id="walletSection" class="flex items-center space-x-3">
                        <!-- 网络选择 -->
                        <div id="networkDropdown" class="relative hidden">
                            <button id="networkButton" onclick="toggleNetworkDropdown()" class="flex items-center space-x-2 px-3 py-2 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors">
                                <div id="networkIcon" class="w-6 h-6 rounded-full network-icon-bg ethereum flex items-center justify-center">
                                    <i class="fab fa-ethereum text-white text-sm"></i>
                                </div>
                                <span id="networkName" class="text-sm font-medium">Ethereum</span>
                                <i class="fas fa-chevron-down text-xs"></i>
                            </button>
                            
                            <div id="networkDropdownMenu" class="absolute top-full right-0 mt-2 w-64 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50 hidden">
                                <div class="p-2 space-y-1">
                                    <button onclick="switchNetwork('ethereum')" class="w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-colors">
                                        <div class="w-8 h-8 rounded-full network-icon-bg ethereum flex items-center justify-center">
                                            <i class="fab fa-ethereum text-white"></i>
                                        </div>
                                        <div class="flex-1 text-left">
                                            <div class="font-medium">Ethereum</div>
                                            <div class="text-xs text-gray-400">Gas: ~$15</div>
                                        </div>
                                        <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                                    </button>
                                    <button onclick="switchNetwork('polygon')" class="w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-colors">
                                        <div class="w-8 h-8 rounded-full network-icon-bg polygon flex items-center justify-center">
                                            <i class="fas fa-gem text-white"></i>
                                        </div>
                                        <div class="flex-1 text-left">
                                            <div class="font-medium">Polygon</div>
                                            <div class="text-xs text-gray-400">Gas: ~$0.01</div>
                                        </div>
                                        <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                                    </button>
                                    <button onclick="switchNetwork('bsc')" class="w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-colors">
                                        <div class="w-8 h-8 rounded-full network-icon-bg bsc flex items-center justify-center">
                                            <i class="fas fa-coins text-white"></i>
                                        </div>
                                        <div class="flex-1 text-left">
                                            <div class="font-medium">BSC</div>
                                            <div class="text-xs text-gray-400">Gas: ~$0.20</div>
                                        </div>
                                        <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                                    </button>
                                    <hr class="border-gray-700 my-2">
                                    <button onclick="addCustomNetwork()" class="w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-colors text-blue-400">
                                        <i class="fas fa-plus w-8 text-center"></i>
                                        <span data-en="Add Custom Network">添加自定义网络</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 余额显示 -->
                        <div id="balanceDisplay" class="hidden bg-gray-800 px-4 py-2 rounded-lg">
                            <div class="text-sm">
                                <span class="text-gray-400" data-en="Balance">余额: </span>
                                <span class="font-bold text-blue-400">1,250.50 SAP</span>
                            </div>
                        </div>

                        <!-- 钱包连接按钮 -->
                        <button id="connectWalletBtn" onclick="connectWallet()" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-300">
                            <span data-en="Connect Wallet">连接钱包</span>
                        </button>

                        <!-- 已连接钱包显示 -->
                        <div id="connectedWallet" class="hidden flex items-center space-x-3">
                            <div class="w-8 h-8 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-wallet text-white text-sm"></i>
                            </div>
                            <div class="text-sm">
                                <div class="font-medium">0x1234...5678</div>
                                <div class="text-xs text-gray-400" data-en="Connected">已连接</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主内容区域 -->
    <main class="container mx-auto px-6 py-8">
        <!-- iframe容器 -->
        <div id="iframe-container" class="relative">
            <iframe 
                id="main-iframe" 
                src="marketplace.html" 
                class="w-full main-iframe"
                style="height: calc(100vh - 200px); min-height: 600px;"
                frameborder="0">
            </iframe>
        </div>
    </main>

    <script>
        let currentLanguage = 'zh';
        let isWalletConnected = false;

        // 页面加载
        function loadPage(pageName) {
            const iframe = document.getElementById('main-iframe');
            iframe.src = pageName + '.html';
            
            // 更新导航状态
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('bg-blue-600', 'text-white');
                item.classList.add('text-gray-300', 'hover:text-white', 'hover:bg-gray-700');
            });
            
            const activeItem = document.querySelector(`[data-page="${pageName}"]`);
            if (activeItem) {
                activeItem.classList.remove('text-gray-300', 'hover:text-white', 'hover:bg-gray-700');
                activeItem.classList.add('bg-blue-600', 'text-white');
            }
        }

        // 语言切换
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'zh' ? 'en' : 'zh';
            switchLanguage(currentLanguage);
            
            // 向iframe发送语言切换消息
            const iframe = document.getElementById('main-iframe');
            if (iframe.contentWindow) {
                iframe.contentWindow.postMessage({
                    type: 'languageChange',
                    language: currentLanguage
                }, '*');
            }
        }

        function switchLanguage(lang) {
            const elements = document.querySelectorAll('[data-en]');
            elements.forEach(element => {
                if (!element.hasAttribute('data-zh')) {
                    element.setAttribute('data-zh', element.textContent);
                }
                
                if (lang === 'en') {
                    element.textContent = element.getAttribute('data-en');
                } else {
                    element.textContent = element.getAttribute('data-zh');
                }
            });
        }

        // 钱包连接
        function connectWallet() {
            // 模拟钱包连接
            isWalletConnected = true;
            
            document.getElementById('connectWalletBtn').classList.add('hidden');
            document.getElementById('connectedWallet').classList.remove('hidden');
            document.getElementById('balanceDisplay').classList.remove('hidden');
            document.getElementById('networkDropdown').classList.remove('hidden');
        }

        // 网络切换
        function toggleNetworkDropdown() {
            const dropdown = document.getElementById('networkDropdownMenu');
            dropdown.classList.toggle('hidden');
        }

        function switchNetwork(network) {
            const networkIcon = document.getElementById('networkIcon');
            const networkName = document.getElementById('networkName');
            
            // 更新图标和样式
            networkIcon.className = `w-6 h-6 rounded-full network-icon-bg ${network} flex items-center justify-center`;
            
            switch(network) {
                case 'ethereum':
                    networkIcon.innerHTML = '<i class="fab fa-ethereum text-white text-sm"></i>';
                    networkName.textContent = 'Ethereum';
                    break;
                case 'polygon':
                    networkIcon.innerHTML = '<i class="fas fa-gem text-white text-sm"></i>';
                    networkName.textContent = 'Polygon';
                    break;
                case 'bsc':
                    networkIcon.innerHTML = '<i class="fas fa-coins text-white text-sm"></i>';
                    networkName.textContent = 'BSC';
                    break;
            }
            
            toggleNetworkDropdown();
        }

        function addCustomNetwork() {
            alert('添加自定义网络功能即将推出！');
            toggleNetworkDropdown();
        }

        // 点击外部关闭下拉菜单
        document.addEventListener('click', function(event) {
            const networkDropdown = document.getElementById('networkDropdown');
            const networkDropdownMenu = document.getElementById('networkDropdownMenu');
            
            if (networkDropdown && !networkDropdown.contains(event.target)) {
                networkDropdownMenu.classList.add('hidden');
            }
        });

        // 监听iframe的加载完成事件
        document.getElementById('main-iframe').addEventListener('load', function() {
            // 向新加载的页面发送当前语言设置
            if (currentLanguage === 'en') {
                setTimeout(() => {
                    this.contentWindow.postMessage({
                        type: 'languageChange',
                        language: currentLanguage
                    }, '*');
                }, 100);
            }
        });
    </script>
</body>
</html> 