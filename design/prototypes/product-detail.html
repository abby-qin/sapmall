<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商品详情 - Sapphire Mall</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            margin: 0;
            padding: 0;
        }
        .gradient-border {
            background: linear-gradient(45deg, #3b82f6, #8b5cf6);
            padding: 2px;
            border-radius: 16px;
        }
        .gradient-border-content {
            background: #1f2937;
            border-radius: 14px;
            padding: 1.5rem;
        }
    </style>
</head>
<body class="min-h-screen text-white">
    <div class="container mx-auto px-6 py-8">
        <!-- 返回按钮 -->
        <button onclick="history.back()" class="mb-6 flex items-center text-blue-400 hover:text-blue-300 transition-colors">
            <i class="fas fa-arrow-left mr-2"></i>
            <span data-en="Back to Marketplace">返回商城</span>
        </button>

        <!-- 商品详情内容 -->
        <div class="grid lg:grid-cols-2 gap-8">
            <!-- 左侧商品图片 -->
            <div class="gradient-border">
                <div class="gradient-border-content">
                    <div class="relative mb-4">
                        <img id="productImage" src="" alt="Product" class="w-full h-80 object-cover rounded-lg">
                        <div class="absolute top-4 left-4">
                            <span id="rarityBadge" class="px-3 py-1 rounded-full text-sm font-medium text-white bg-purple-500">稀有</span>
                        </div>
                        <div class="absolute top-4 right-4">
                            <button id="favoriteBtn" onclick="toggleDetailFavorite()" class="w-10 h-10 bg-black/50 rounded-full flex items-center justify-center hover:bg-black/70 transition-colors">
                                <i class="far fa-heart text-white text-lg"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 右侧商品信息 -->
            <div class="space-y-6">
                <!-- 基本信息 -->
                <div class="gradient-border">
                    <div class="gradient-border-content">
                        <h1 id="productTitle" class="text-2xl font-bold mb-4">商品名称</h1>
                        <div class="flex items-center mb-4">
                            <div id="ratingStars" class="flex text-yellow-400 mr-3"></div>
                            <span id="ratingInfo" class="text-gray-400">4.8 (123 评价)</span>
                        </div>
                        <p id="productDescription" class="text-gray-300 mb-6">商品描述</p>
                        
                        <!-- 价格 -->
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <span id="currentPrice" class="text-3xl font-bold text-blue-400">1,250.00 SAP</span>
                                <span id="originalPrice" class="text-lg text-gray-500 line-through ml-3 hidden">1,500.00 SAP</span>
                                <div id="discountBadge" class="bg-red-500 text-white px-2 py-1 rounded text-sm font-medium mt-2 hidden">限时优惠 -20%</div>
                            </div>
                        </div>

                        <!-- 购买按钮 -->
                        <div class="space-y-3">
                            <button onclick="processDetailPurchase()" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 font-semibold">
                                <i class="fas fa-shopping-cart mr-2"></i>
                                <span data-en="Buy Now">立即购买</span>
                            </button>
                            <button class="w-full bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg transition-colors font-semibold">
                                <i class="fas fa-plus mr-2"></i>
                                <span data-en="Add to Cart">加入购物车</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 商品统计 -->
                <div class="gradient-border">
                    <div class="gradient-border-content">
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div>
                                <div class="text-2xl font-bold text-blue-400" id="viewCount">1,234</div>
                                <div class="text-sm text-gray-400" data-en="Views">浏览量</div>
                            </div>
                            <div>
                                <div class="text-2xl font-bold text-green-400" id="soldCount">89</div>
                                <div class="text-sm text-gray-400" data-en="Sold">已售出</div>
                            </div>
                            <div>
                                <div class="text-2xl font-bold text-purple-400" id="stockCount">25</div>
                                <div class="text-sm text-gray-400" data-en="In Stock">库存</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 详细信息标签页 -->
        <div class="mt-8 gradient-border">
            <div class="gradient-border-content">
                <!-- 标签导航 -->
                <div class="flex border-b border-gray-600 mb-6">
                    <button onclick="switchDetailTab('details')" class="px-6 py-3 text-white font-medium border-b-2 border-blue-500" id="tab-details" data-en="Details">详细信息</button>
                    <button onclick="switchDetailTab('reviews')" class="px-6 py-3 text-gray-400 font-medium border-b-2 border-transparent hover:text-white" id="tab-reviews" data-en="Reviews">用户评价</button>
                    <button onclick="switchDetailTab('faq')" class="px-6 py-3 text-gray-400 font-medium border-b-2 border-transparent hover:text-white" id="tab-faq" data-en="FAQ">常见问题</button>
                </div>

                <!-- 标签内容 -->
                <div id="tab-content-details" class="tab-content">
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-lg font-semibold mb-3" data-en="Product Highlights">商品亮点</h3>
                            <ul id="productHighlights" class="list-disc list-inside text-gray-300 space-y-1">
                                <li>高品质的数字资产</li>
                                <li>区块链认证和所有权</li>
                                <li>稀有度认证</li>
                            </ul>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold mb-3" data-en="Specifications">规格信息</h3>
                            <div id="productSpecs" class="space-y-2 text-gray-300">
                                <div class="flex justify-between">
                                    <span>类型:</span>
                                    <span>数字资产</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>区块链:</span>
                                    <span>Ethereum</span>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold mb-3" data-en="Usage Instructions">使用说明</h3>
                            <div id="usageInstructions" class="text-gray-300">
                                <p>购买后，商品将自动转移到您的钱包地址。您可以在个人资产页面查看和管理您的数字藏品。</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab-content-reviews" class="tab-content hidden">
                    <div class="space-y-4">
                        <div class="border-b border-gray-600 pb-4">
                            <div class="flex items-center mb-2">
                                <div class="flex text-yellow-400 mr-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <span class="font-semibold mr-2">用户12345</span>
                                <span class="text-sm text-gray-400">2023-12-01</span>
                            </div>
                            <p class="text-gray-300">非常棒的商品，质量超出预期！物流也很快。</p>
                        </div>
                        <div class="border-b border-gray-600 pb-4">
                            <div class="flex items-center mb-2">
                                <div class="flex text-yellow-400 mr-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="far fa-star"></i>
                                </div>
                                <span class="font-semibold mr-2">游戏玩家</span>
                                <span class="text-sm text-gray-400">2023-11-28</span>
                            </div>
                            <p class="text-gray-300">商品很有收藏价值，推荐给其他玩家。</p>
                        </div>
                    </div>
                </div>

                <div id="tab-content-faq" class="tab-content hidden">
                    <div class="space-y-4">
                        <div>
                            <h4 class="font-semibold mb-2">如何使用购买的数字商品？</h4>
                            <p class="text-gray-300">购买完成后，商品会自动转移到您的钱包。您可以在游戏中直接使用或在二级市场转售。</p>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2">支持退款吗？</h4>
                            <p class="text-gray-300">由于数字商品的特殊性，一般情况下不支持退款。请在购买前仔细确认商品信息。</p>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2">如何确认商品的真实性？</h4>
                            <p class="text-gray-300">所有商品都在区块链上进行认证，您可以通过交易哈希查询商品的完整历史记录。</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 监听URL参数以设置商品信息
        window.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('name')) {
                setProductData({
                    name: urlParams.get('name'),
                    image: urlParams.get('image'),
                    price: urlParams.get('price'),
                    rarity: urlParams.get('rarity'),
                    description: urlParams.get('description'),
                    rating: urlParams.get('rating'),
                    reviews: urlParams.get('reviews'),
                    category: urlParams.get('category')
                });
            }
        });

        function setProductData(productData) {
            document.getElementById('productTitle').textContent = productData.name;
            document.getElementById('productImage').src = productData.image;
            document.getElementById('productDescription').textContent = productData.description;
            document.getElementById('currentPrice').textContent = productData.price + ' SAP';
            document.getElementById('rarityBadge').textContent = productData.rarity;
            document.getElementById('ratingInfo').textContent = productData.rating + ' (' + productData.reviews + ' 评价)';
            
            // 生成星级评分
            document.getElementById('ratingStars').innerHTML = generateRatingStars(parseFloat(productData.rating));
            
            // 根据类别生成内容
            generateProductHighlights(productData.category);
            generateProductSpecs(productData.category, productData);
        }

        function generateRatingStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= rating) {
                    stars += '<i class="fas fa-star"></i>';
                } else if (i - 0.5 <= rating) {
                    stars += '<i class="fas fa-star-half-alt"></i>';
                } else {
                    stars += '<i class="far fa-star"></i>';
                }
            }
            return stars;
        }

        function generateProductHighlights(category) {
            const highlights = document.getElementById('productHighlights');
            const highlightsByCategory = {
                'gaming-skins': [
                    '独特的视觉效果和动画',
                    '提升游戏体验',
                    '稀有收藏价值',
                    '区块链认证所有权'
                ],
                'art-nft': [
                    '原创数字艺术作品',
                    '区块链永久存储',
                    '独一无二的收藏品',
                    '艺术家签名认证'
                ],
                'land': [
                    '元宇宙优质位置',
                    '可自由建设开发',
                    '投资收益潜力',
                    '完整土地所有权'
                ],
                'collectibles': [
                    '限量发行数量',
                    '专属会员权益',
                    '稀有度认证',
                    '升值空间巨大'
                ]
            };
            
            const categoryHighlights = highlightsByCategory[category] || highlightsByCategory['art-nft'];
            highlights.innerHTML = categoryHighlights.map(h => `<li>${h}</li>`).join('');
        }

        function generateProductSpecs(category, productData) {
            const specs = document.getElementById('productSpecs');
            const specsByCategory = {
                'gaming-skins': [
                    ['稀有度', productData.rarity],
                    ['游戏', '王者荣耀'],
                    ['类型', '角色皮肤'],
                    ['区块链', 'Polygon']
                ],
                'art-nft': [
                    ['艺术家', '知名数字艺术家'],
                    ['创作年份', '2023'],
                    ['分辨率', '4K高清'],
                    ['区块链', 'Ethereum']
                ],
                'land': [
                    ['坐标', '(256, 128)'],
                    ['面积', '256 × 256 像素'],
                    ['元宇宙', 'Sandbox'],
                    ['区块链', 'Ethereum']
                ]
            };
            
            const categorySpecs = specsByCategory[category] || specsByCategory['art-nft'];
            specs.innerHTML = categorySpecs.map(([key, value]) => 
                `<div class="flex justify-between"><span>${key}:</span><span>${value}</span></div>`
            ).join('');
        }

        function switchDetailTab(tabName) {
            // 隐藏所有标签内容
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // 重置所有标签样式
            document.querySelectorAll('[id^="tab-"]').forEach(tab => {
                tab.classList.remove('text-white', 'border-blue-500');
                tab.classList.add('text-gray-400', 'border-transparent');
            });
            
            // 显示选中的标签内容
            document.getElementById('tab-content-' + tabName).classList.remove('hidden');
            
            // 设置选中标签样式
            const activeTab = document.getElementById('tab-' + tabName);
            activeTab.classList.remove('text-gray-400', 'border-transparent');
            activeTab.classList.add('text-white', 'border-blue-500');
        }

        function toggleDetailFavorite() {
            const btn = document.getElementById('favoriteBtn');
            const icon = btn.querySelector('i');
            
            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas', 'text-red-400');
            } else {
                icon.classList.remove('fas', 'text-red-400');
                icon.classList.add('far');
            }
        }

        function processDetailPurchase() {
            // 购买处理逻辑
            console.log('处理购买...');
        }

        // 监听父窗口的语言切换消息
        window.addEventListener('message', function(event) {
            if (event.data.type === 'languageChange') {
                switchLanguage(event.data.language);
            }
        });

        function switchLanguage(lang) {
            const elements = document.querySelectorAll('[data-en]');
            elements.forEach(element => {
                if (!element.hasAttribute('data-zh')) {
                    element.setAttribute('data-zh', element.textContent);
                }
                
                if (lang === 'en') {
                    element.textContent = element.getAttribute('data-en');
                } else {
                    element.textContent = element.getAttribute('data-zh');
                }
            });
        }
    </script>
</body>
</html> 